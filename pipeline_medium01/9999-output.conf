output { 
# stdout { codec => rubydebug {metadata => true} }
# stdout { codec => json }
    if [type] == "dead_letter_queue" {
        stdout { codec => rubydebug {metadata => true} }
    }
    else if [collection_type] == "beats" and [type] != "wineventlog" {
        file {
            path => "/data/log_collector/logs/beats-%{+YYYY-MM-dd}.log"
            gzip => true
        }
    }
    else {
        # lumberjack { 
        #     flush_size => 1000
        #     idle_flush_time => 30
        #     codec => json 
        #     hosts => ["24.234.194.124"]
        #     ssl_certificate => "/data/log_collector/config/aggregator.cert" 
        #     port => 443 
        # }
        lumberjack { 
            flush_size => 1000
            idle_flush_time => 10
            codec => json 
            hosts => ["35.240.172.67","35.240.165.30"]
            ssl_certificate => "/data/log_collector/config/aggregator.cert" 
            port => 443 
        }
    }
}
